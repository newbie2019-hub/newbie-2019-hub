[{"data":1,"prerenderedAt":1021},["ShallowReactive",2],{"content-query-vFF8rbAWMh":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":5,"title":7,"description":8,"date":9,"preview":10,"draft":6,"tags":11,"categories":16,"slug":17,"body":18,"_type":1015,"_id":1016,"_source":1017,"_file":1018,"_stem":1019,"_extension":1020},"/02-laravel-session","",false,"Laravel Session","Learn how to setup laravel session instead of a token-based authentication that works for api as well","November 20, 2024","/img/laravel-session.webp",[12,13,14,15],"session","laravel","php","authentication",[13,14],"setting-up-laravel-session",{"type":19,"children":20,"toc":1013},"root",[21,30,40,45,53,58,64,80,88,100,105,135,140,183,221,251,259,264,319,324,406,435,440,953,967,980,1007],{"type":22,"tag":23,"props":24,"children":26},"element","h4",{"id":25},"session-based-authentication-in-laravel",[27],{"type":28,"value":29},"text","Session-based Authentication in Laravel",{"type":22,"tag":31,"props":32,"children":33},"p",{},[34],{"type":22,"tag":35,"props":36,"children":37},"strong",{},[38],{"type":28,"value":39},"What is session-based authentication?",{"type":22,"tag":31,"props":41,"children":42},{},[43],{"type":28,"value":44},"Session-based authentication is created on the server for each user after they login. The server then sends a unique session identifier for the client side to store which is usually stored in the cookie. This cookie is used for subsequent requests to authenticate the user.",{"type":22,"tag":31,"props":46,"children":47},{},[48],{"type":22,"tag":35,"props":49,"children":50},{},[51],{"type":28,"value":52},"What is a cookie?",{"type":22,"tag":31,"props":54,"children":55},{},[56],{"type":28,"value":57},"It is a small piece of data that a web sever sends to a user's web browser which is then stored and is sent back with every subsequent request to the same server. Think of it as a way for websites to remember users across different sessions.",{"type":22,"tag":23,"props":59,"children":61},{"id":60},"setting-up-session-based-authentication-in-laravel",[62],{"type":28,"value":63},"Setting up Session-based Authentication in Laravel",{"type":22,"tag":31,"props":65,"children":66},{},[67,69,78],{"type":28,"value":68},"Setting up API Authentication in Laravel is simple since they already have the starter kits. You can also check their ",{"type":22,"tag":70,"props":71,"children":75},"a",{"href":72,"rel":73},"https://laravel.com/docs/11.x/starter-kits#breeze-and-next",[74],"nofollow",[76],{"type":28,"value":77},"documentation",{"type":28,"value":79}," for more information.",{"type":22,"tag":31,"props":81,"children":82},{},[83],{"type":22,"tag":35,"props":84,"children":85},{},[86],{"type":28,"value":87},"SPA Authentication",{"type":22,"tag":31,"props":89,"children":90},{},[91,93],{"type":28,"value":92},"This is from their documentation. You can read more from ",{"type":22,"tag":70,"props":94,"children":97},{"href":95,"rel":96},"https://laravel.com/docs/11.x/sanctum#spa-authentication",[74],[98],{"type":28,"value":99},"here",{"type":22,"tag":31,"props":101,"children":102},{},[103],{"type":28,"value":104},"For this feature, Sanctum does not use tokens of any kind. Instead, Sanctum uses Laravel's built-in cookie based session authentication services. This approach to authentication provides the benefits of CSRF protection, session authentication, as well as protects against leakage of the authentication credentials via XSS.",{"type":22,"tag":31,"props":106,"children":107},{},[108,110,117,119,125,127,133],{"type":28,"value":109},"In order to authenticate, your SPA and API must share the same top-level domain. However, they may be placed on different subdomains. Additionally, you should ensure that you send the ",{"type":22,"tag":111,"props":112,"children":114},"code",{"className":113},[],[115],{"type":28,"value":116},"Accept: application/json",{"type":28,"value":118}," header and either the ",{"type":22,"tag":111,"props":120,"children":122},{"className":121},[],[123],{"type":28,"value":124},"Referer",{"type":28,"value":126}," or ",{"type":22,"tag":111,"props":128,"children":130},{"className":129},[],[131],{"type":28,"value":132},"Origin",{"type":28,"value":134}," header with your request.",{"type":22,"tag":31,"props":136,"children":137},{},[138],{"type":28,"value":139},"Steps:",{"type":22,"tag":141,"props":142,"children":143},"ol",{},[144,158,170],{"type":22,"tag":145,"props":146,"children":147},"li",{},[148,150,156],{"type":28,"value":149},"Run the ",{"type":22,"tag":111,"props":151,"children":153},{"className":152},[],[154],{"type":28,"value":155},"php artisan breeze:install",{"type":28,"value":157}," command and select the API stack as the desired stack.",{"type":22,"tag":145,"props":159,"children":160},{},[161,162,168],{"type":28,"value":149},{"type":22,"tag":111,"props":163,"children":165},{"className":164},[],[166],{"type":28,"value":167},"php artisan migrate",{"type":28,"value":169}," to run the newly created migrations.",{"type":22,"tag":145,"props":171,"children":172},{},[173,175,181],{"type":28,"value":174},"Ensure this environmental variables exist in your ",{"type":22,"tag":111,"props":176,"children":178},{"className":177},[],[179],{"type":28,"value":180},".env",{"type":28,"value":182}," file",{"type":22,"tag":184,"props":185,"children":188},"pre",{"className":186,"code":187,"language":14,"meta":5,"style":5},"language-php shiki shiki-themes github-dark","FRONTEND_URL= //Add your frontend url\nSESSION_DOMAIN=.localhost //with a dot before the localhost\nSANCTUM_STATEFUL_DOMAINS= //.localhost\n",[189],{"type":22,"tag":111,"props":190,"children":191},{"__ignoreMap":5},[192,203,212],{"type":22,"tag":193,"props":194,"children":197},"span",{"class":195,"line":196},"line",1,[198],{"type":22,"tag":193,"props":199,"children":200},{},[201],{"type":28,"value":202},"FRONTEND_URL= //Add your frontend url\n",{"type":22,"tag":193,"props":204,"children":206},{"class":195,"line":205},2,[207],{"type":22,"tag":193,"props":208,"children":209},{},[210],{"type":28,"value":211},"SESSION_DOMAIN=.localhost //with a dot before the localhost\n",{"type":22,"tag":193,"props":213,"children":215},{"class":195,"line":214},3,[216],{"type":22,"tag":193,"props":217,"children":218},{},[219],{"type":28,"value":220},"SANCTUM_STATEFUL_DOMAINS= //.localhost\n",{"type":22,"tag":141,"props":222,"children":224},{"start":223},5,[225,246],{"type":22,"tag":145,"props":226,"children":227},{},[228,230,236,238,244],{"type":28,"value":229},"Verify if the routes are now available using ",{"type":22,"tag":111,"props":231,"children":233},{"className":232},[],[234],{"type":28,"value":235},"php artisan route:list",{"type":28,"value":237}," or ",{"type":22,"tag":111,"props":239,"children":241},{"className":240},[],[242],{"type":28,"value":243},"php artisan r:l",{"type":28,"value":245},". This will list all available route for your application. Check if there are routes for login, register, forgot password.",{"type":22,"tag":145,"props":247,"children":248},{},[249],{"type":28,"value":250},"That's all you need to have a working api authentication.",{"type":22,"tag":31,"props":252,"children":253},{},[254],{"type":22,"tag":35,"props":255,"children":256},{},[257],{"type":28,"value":258},"Connecting your React or any SPA",{"type":22,"tag":31,"props":260,"children":261},{},[262],{"type":28,"value":263},"You can now use react, vue or any SPA that you like. Now, when making a request using axios or any fetching library ensure to add the following configuration or any equivalent.",{"type":22,"tag":184,"props":265,"children":269},{"className":266,"code":267,"language":268,"meta":5,"style":5},"language-js shiki shiki-themes github-dark","axios.defaults.withCredentials = true;\naxios.defaults.withXSRFToken = true;\n","js",[270],{"type":22,"tag":111,"props":271,"children":272},{"__ignoreMap":5},[273,299],{"type":22,"tag":193,"props":274,"children":275},{"class":195,"line":196},[276,282,288,294],{"type":22,"tag":193,"props":277,"children":279},{"style":278},"--shiki-default:#E1E4E8",[280],{"type":28,"value":281},"axios.defaults.withCredentials ",{"type":22,"tag":193,"props":283,"children":285},{"style":284},"--shiki-default:#F97583",[286],{"type":28,"value":287},"=",{"type":22,"tag":193,"props":289,"children":291},{"style":290},"--shiki-default:#79B8FF",[292],{"type":28,"value":293}," true",{"type":22,"tag":193,"props":295,"children":296},{"style":278},[297],{"type":28,"value":298},";\n",{"type":22,"tag":193,"props":300,"children":301},{"class":195,"line":205},[302,307,311,315],{"type":22,"tag":193,"props":303,"children":304},{"style":278},[305],{"type":28,"value":306},"axios.defaults.withXSRFToken ",{"type":22,"tag":193,"props":308,"children":309},{"style":284},[310],{"type":28,"value":287},{"type":22,"tag":193,"props":312,"children":313},{"style":290},[314],{"type":28,"value":293},{"type":22,"tag":193,"props":316,"children":317},{"style":278},[318],{"type":28,"value":298},{"type":22,"tag":31,"props":320,"children":321},{},[322],{"type":28,"value":323},"What this does is it will automatically handle the cookie whenever you send a request to your api application. Most likely if ever you use axios you'll have a setup like this.",{"type":22,"tag":184,"props":325,"children":327},{"className":266,"code":326,"language":268,"meta":5,"style":5},"import axios form 'axios';\n\nexport const api = axios.create({\n  baseURL: import.meta.env.VITE_API_URL,\n  withCredentials: true,\n  withXSRFToken: true,\n})\n",[328],{"type":22,"tag":111,"props":329,"children":330},{"__ignoreMap":5},[331,354,363,371,380,388,397],{"type":22,"tag":193,"props":332,"children":333},{"class":195,"line":196},[334,339,344,350],{"type":22,"tag":193,"props":335,"children":336},{"style":284},[337],{"type":28,"value":338},"import",{"type":22,"tag":193,"props":340,"children":341},{"style":278},[342],{"type":28,"value":343}," axios form ",{"type":22,"tag":193,"props":345,"children":347},{"style":346},"--shiki-default:#9ECBFF",[348],{"type":28,"value":349},"'axios'",{"type":22,"tag":193,"props":351,"children":352},{"style":278},[353],{"type":28,"value":298},{"type":22,"tag":193,"props":355,"children":356},{"class":195,"line":205},[357],{"type":22,"tag":193,"props":358,"children":360},{"emptyLinePlaceholder":359},true,[361],{"type":28,"value":362},"\n",{"type":22,"tag":193,"props":364,"children":365},{"class":195,"line":214},[366],{"type":22,"tag":193,"props":367,"children":368},{"style":278},[369],{"type":28,"value":370},"export const api = axios.create({\n",{"type":22,"tag":193,"props":372,"children":374},{"class":195,"line":373},4,[375],{"type":22,"tag":193,"props":376,"children":377},{"style":278},[378],{"type":28,"value":379},"  baseURL: import.meta.env.VITE_API_URL,\n",{"type":22,"tag":193,"props":381,"children":382},{"class":195,"line":223},[383],{"type":22,"tag":193,"props":384,"children":385},{"style":278},[386],{"type":28,"value":387},"  withCredentials: true,\n",{"type":22,"tag":193,"props":389,"children":391},{"class":195,"line":390},6,[392],{"type":22,"tag":193,"props":393,"children":394},{"style":278},[395],{"type":28,"value":396},"  withXSRFToken: true,\n",{"type":22,"tag":193,"props":398,"children":400},{"class":195,"line":399},7,[401],{"type":22,"tag":193,"props":402,"children":403},{"style":278},[404],{"type":28,"value":405},"})\n",{"type":22,"tag":31,"props":407,"children":408},{},[409,411,417,419,425,427,433],{"type":28,"value":410},"To start authenticating your user you can create a basic login form and before you send a post request to ",{"type":22,"tag":111,"props":412,"children":414},{"className":413},[],[415],{"type":28,"value":416},"/login",{"type":28,"value":418}," you need first to send a ",{"type":22,"tag":111,"props":420,"children":422},{"className":421},[],[423],{"type":28,"value":424},"GET",{"type":28,"value":426}," request to ",{"type":22,"tag":111,"props":428,"children":430},{"className":429},[],[431],{"type":28,"value":432},"sanctum/csrf-cookie",{"type":28,"value":434}," route.",{"type":22,"tag":31,"props":436,"children":437},{},[438],{"type":28,"value":439},"Typically you would have this methods for your login.",{"type":22,"tag":184,"props":441,"children":445},{"className":442,"code":443,"language":444,"meta":5,"style":5},"language-ts shiki shiki-themes github-dark","// Make this request first then afterwards the login\nconst getCSRFToken = async () => {\n    await api.get('sanctum/csrf-cookie', {\n      baseURL: import.meta.env.VITE_API_WEB_URL\n    })\n}\n\nconst login = async (form: UserLogin) => {\n    const { status, data } = await api.post('login', form,\n      { baseURL: import.meta.env.VITE_API_WEB_URL }\n    )\n    // Handle the response\n}\n\n// Register\n\n// Logout\nconst logout = async () => {\n    const { status } = await api.post('logout', null, {\n      baseURL: import.meta.env.VITE_API_WEB_URL\n    })\n\n    // Handle the logout\n}\n","ts",[446],{"type":22,"tag":111,"props":447,"children":448},{"__ignoreMap":5},[449,458,497,530,562,570,578,585,640,706,741,750,759,767,775,784,792,801,834,892,920,928,936,945],{"type":22,"tag":193,"props":450,"children":451},{"class":195,"line":196},[452],{"type":22,"tag":193,"props":453,"children":455},{"style":454},"--shiki-default:#6A737D",[456],{"type":28,"value":457},"// Make this request first then afterwards the login\n",{"type":22,"tag":193,"props":459,"children":460},{"class":195,"line":205},[461,466,472,477,482,487,492],{"type":22,"tag":193,"props":462,"children":463},{"style":284},[464],{"type":28,"value":465},"const",{"type":22,"tag":193,"props":467,"children":469},{"style":468},"--shiki-default:#B392F0",[470],{"type":28,"value":471}," getCSRFToken",{"type":22,"tag":193,"props":473,"children":474},{"style":284},[475],{"type":28,"value":476}," =",{"type":22,"tag":193,"props":478,"children":479},{"style":284},[480],{"type":28,"value":481}," async",{"type":22,"tag":193,"props":483,"children":484},{"style":278},[485],{"type":28,"value":486}," () ",{"type":22,"tag":193,"props":488,"children":489},{"style":284},[490],{"type":28,"value":491},"=>",{"type":22,"tag":193,"props":493,"children":494},{"style":278},[495],{"type":28,"value":496}," {\n",{"type":22,"tag":193,"props":498,"children":499},{"class":195,"line":214},[500,505,510,515,520,525],{"type":22,"tag":193,"props":501,"children":502},{"style":284},[503],{"type":28,"value":504},"    await",{"type":22,"tag":193,"props":506,"children":507},{"style":278},[508],{"type":28,"value":509}," api.",{"type":22,"tag":193,"props":511,"children":512},{"style":468},[513],{"type":28,"value":514},"get",{"type":22,"tag":193,"props":516,"children":517},{"style":278},[518],{"type":28,"value":519},"(",{"type":22,"tag":193,"props":521,"children":522},{"style":346},[523],{"type":28,"value":524},"'sanctum/csrf-cookie'",{"type":22,"tag":193,"props":526,"children":527},{"style":278},[528],{"type":28,"value":529},", {\n",{"type":22,"tag":193,"props":531,"children":532},{"class":195,"line":373},[533,538,542,547,552,557],{"type":22,"tag":193,"props":534,"children":535},{"style":278},[536],{"type":28,"value":537},"      baseURL: ",{"type":22,"tag":193,"props":539,"children":540},{"style":284},[541],{"type":28,"value":338},{"type":22,"tag":193,"props":543,"children":544},{"style":278},[545],{"type":28,"value":546},".",{"type":22,"tag":193,"props":548,"children":549},{"style":290},[550],{"type":28,"value":551},"meta",{"type":22,"tag":193,"props":553,"children":554},{"style":278},[555],{"type":28,"value":556},".env.",{"type":22,"tag":193,"props":558,"children":559},{"style":290},[560],{"type":28,"value":561},"VITE_API_WEB_URL\n",{"type":22,"tag":193,"props":563,"children":564},{"class":195,"line":223},[565],{"type":22,"tag":193,"props":566,"children":567},{"style":278},[568],{"type":28,"value":569},"    })\n",{"type":22,"tag":193,"props":571,"children":572},{"class":195,"line":390},[573],{"type":22,"tag":193,"props":574,"children":575},{"style":278},[576],{"type":28,"value":577},"}\n",{"type":22,"tag":193,"props":579,"children":580},{"class":195,"line":399},[581],{"type":22,"tag":193,"props":582,"children":583},{"emptyLinePlaceholder":359},[584],{"type":28,"value":362},{"type":22,"tag":193,"props":586,"children":588},{"class":195,"line":587},8,[589,593,598,602,606,611,617,622,627,632,636],{"type":22,"tag":193,"props":590,"children":591},{"style":284},[592],{"type":28,"value":465},{"type":22,"tag":193,"props":594,"children":595},{"style":468},[596],{"type":28,"value":597}," login",{"type":22,"tag":193,"props":599,"children":600},{"style":284},[601],{"type":28,"value":476},{"type":22,"tag":193,"props":603,"children":604},{"style":284},[605],{"type":28,"value":481},{"type":22,"tag":193,"props":607,"children":608},{"style":278},[609],{"type":28,"value":610}," (",{"type":22,"tag":193,"props":612,"children":614},{"style":613},"--shiki-default:#FFAB70",[615],{"type":28,"value":616},"form",{"type":22,"tag":193,"props":618,"children":619},{"style":284},[620],{"type":28,"value":621},":",{"type":22,"tag":193,"props":623,"children":624},{"style":468},[625],{"type":28,"value":626}," UserLogin",{"type":22,"tag":193,"props":628,"children":629},{"style":278},[630],{"type":28,"value":631},") ",{"type":22,"tag":193,"props":633,"children":634},{"style":284},[635],{"type":28,"value":491},{"type":22,"tag":193,"props":637,"children":638},{"style":278},[639],{"type":28,"value":496},{"type":22,"tag":193,"props":641,"children":643},{"class":195,"line":642},9,[644,649,654,659,664,669,674,678,683,687,692,696,701],{"type":22,"tag":193,"props":645,"children":646},{"style":284},[647],{"type":28,"value":648},"    const",{"type":22,"tag":193,"props":650,"children":651},{"style":278},[652],{"type":28,"value":653}," { ",{"type":22,"tag":193,"props":655,"children":656},{"style":290},[657],{"type":28,"value":658},"status",{"type":22,"tag":193,"props":660,"children":661},{"style":278},[662],{"type":28,"value":663},", ",{"type":22,"tag":193,"props":665,"children":666},{"style":290},[667],{"type":28,"value":668},"data",{"type":22,"tag":193,"props":670,"children":671},{"style":278},[672],{"type":28,"value":673}," } ",{"type":22,"tag":193,"props":675,"children":676},{"style":284},[677],{"type":28,"value":287},{"type":22,"tag":193,"props":679,"children":680},{"style":284},[681],{"type":28,"value":682}," await",{"type":22,"tag":193,"props":684,"children":685},{"style":278},[686],{"type":28,"value":509},{"type":22,"tag":193,"props":688,"children":689},{"style":468},[690],{"type":28,"value":691},"post",{"type":22,"tag":193,"props":693,"children":694},{"style":278},[695],{"type":28,"value":519},{"type":22,"tag":193,"props":697,"children":698},{"style":346},[699],{"type":28,"value":700},"'login'",{"type":22,"tag":193,"props":702,"children":703},{"style":278},[704],{"type":28,"value":705},", form,\n",{"type":22,"tag":193,"props":707,"children":709},{"class":195,"line":708},10,[710,715,719,723,727,731,736],{"type":22,"tag":193,"props":711,"children":712},{"style":278},[713],{"type":28,"value":714},"      { baseURL: ",{"type":22,"tag":193,"props":716,"children":717},{"style":284},[718],{"type":28,"value":338},{"type":22,"tag":193,"props":720,"children":721},{"style":278},[722],{"type":28,"value":546},{"type":22,"tag":193,"props":724,"children":725},{"style":290},[726],{"type":28,"value":551},{"type":22,"tag":193,"props":728,"children":729},{"style":278},[730],{"type":28,"value":556},{"type":22,"tag":193,"props":732,"children":733},{"style":290},[734],{"type":28,"value":735},"VITE_API_WEB_URL",{"type":22,"tag":193,"props":737,"children":738},{"style":278},[739],{"type":28,"value":740}," }\n",{"type":22,"tag":193,"props":742,"children":744},{"class":195,"line":743},11,[745],{"type":22,"tag":193,"props":746,"children":747},{"style":278},[748],{"type":28,"value":749},"    )\n",{"type":22,"tag":193,"props":751,"children":753},{"class":195,"line":752},12,[754],{"type":22,"tag":193,"props":755,"children":756},{"style":454},[757],{"type":28,"value":758},"    // Handle the response\n",{"type":22,"tag":193,"props":760,"children":762},{"class":195,"line":761},13,[763],{"type":22,"tag":193,"props":764,"children":765},{"style":278},[766],{"type":28,"value":577},{"type":22,"tag":193,"props":768,"children":770},{"class":195,"line":769},14,[771],{"type":22,"tag":193,"props":772,"children":773},{"emptyLinePlaceholder":359},[774],{"type":28,"value":362},{"type":22,"tag":193,"props":776,"children":778},{"class":195,"line":777},15,[779],{"type":22,"tag":193,"props":780,"children":781},{"style":454},[782],{"type":28,"value":783},"// Register\n",{"type":22,"tag":193,"props":785,"children":787},{"class":195,"line":786},16,[788],{"type":22,"tag":193,"props":789,"children":790},{"emptyLinePlaceholder":359},[791],{"type":28,"value":362},{"type":22,"tag":193,"props":793,"children":795},{"class":195,"line":794},17,[796],{"type":22,"tag":193,"props":797,"children":798},{"style":454},[799],{"type":28,"value":800},"// Logout\n",{"type":22,"tag":193,"props":802,"children":804},{"class":195,"line":803},18,[805,809,814,818,822,826,830],{"type":22,"tag":193,"props":806,"children":807},{"style":284},[808],{"type":28,"value":465},{"type":22,"tag":193,"props":810,"children":811},{"style":468},[812],{"type":28,"value":813}," logout",{"type":22,"tag":193,"props":815,"children":816},{"style":284},[817],{"type":28,"value":476},{"type":22,"tag":193,"props":819,"children":820},{"style":284},[821],{"type":28,"value":481},{"type":22,"tag":193,"props":823,"children":824},{"style":278},[825],{"type":28,"value":486},{"type":22,"tag":193,"props":827,"children":828},{"style":284},[829],{"type":28,"value":491},{"type":22,"tag":193,"props":831,"children":832},{"style":278},[833],{"type":28,"value":496},{"type":22,"tag":193,"props":835,"children":837},{"class":195,"line":836},19,[838,842,846,850,854,858,862,866,870,874,879,883,888],{"type":22,"tag":193,"props":839,"children":840},{"style":284},[841],{"type":28,"value":648},{"type":22,"tag":193,"props":843,"children":844},{"style":278},[845],{"type":28,"value":653},{"type":22,"tag":193,"props":847,"children":848},{"style":290},[849],{"type":28,"value":658},{"type":22,"tag":193,"props":851,"children":852},{"style":278},[853],{"type":28,"value":673},{"type":22,"tag":193,"props":855,"children":856},{"style":284},[857],{"type":28,"value":287},{"type":22,"tag":193,"props":859,"children":860},{"style":284},[861],{"type":28,"value":682},{"type":22,"tag":193,"props":863,"children":864},{"style":278},[865],{"type":28,"value":509},{"type":22,"tag":193,"props":867,"children":868},{"style":468},[869],{"type":28,"value":691},{"type":22,"tag":193,"props":871,"children":872},{"style":278},[873],{"type":28,"value":519},{"type":22,"tag":193,"props":875,"children":876},{"style":346},[877],{"type":28,"value":878},"'logout'",{"type":22,"tag":193,"props":880,"children":881},{"style":278},[882],{"type":28,"value":663},{"type":22,"tag":193,"props":884,"children":885},{"style":290},[886],{"type":28,"value":887},"null",{"type":22,"tag":193,"props":889,"children":890},{"style":278},[891],{"type":28,"value":529},{"type":22,"tag":193,"props":893,"children":895},{"class":195,"line":894},20,[896,900,904,908,912,916],{"type":22,"tag":193,"props":897,"children":898},{"style":278},[899],{"type":28,"value":537},{"type":22,"tag":193,"props":901,"children":902},{"style":284},[903],{"type":28,"value":338},{"type":22,"tag":193,"props":905,"children":906},{"style":278},[907],{"type":28,"value":546},{"type":22,"tag":193,"props":909,"children":910},{"style":290},[911],{"type":28,"value":551},{"type":22,"tag":193,"props":913,"children":914},{"style":278},[915],{"type":28,"value":556},{"type":22,"tag":193,"props":917,"children":918},{"style":290},[919],{"type":28,"value":561},{"type":22,"tag":193,"props":921,"children":923},{"class":195,"line":922},21,[924],{"type":22,"tag":193,"props":925,"children":926},{"style":278},[927],{"type":28,"value":569},{"type":22,"tag":193,"props":929,"children":931},{"class":195,"line":930},22,[932],{"type":22,"tag":193,"props":933,"children":934},{"emptyLinePlaceholder":359},[935],{"type":28,"value":362},{"type":22,"tag":193,"props":937,"children":939},{"class":195,"line":938},23,[940],{"type":22,"tag":193,"props":941,"children":942},{"style":454},[943],{"type":28,"value":944},"    // Handle the logout\n",{"type":22,"tag":193,"props":946,"children":948},{"class":195,"line":947},24,[949],{"type":22,"tag":193,"props":950,"children":951},{"style":278},[952],{"type":28,"value":577},{"type":22,"tag":31,"props":954,"children":955},{},[956,958,965],{"type":28,"value":957},"Tip: You'll most likely see a preflight request before any api request you do this is automatically done by the browser. You can check more about it [here](A CORS preflight request is a ",{"type":22,"tag":70,"props":959,"children":962},{"href":960,"rel":961},"https://developer.mozilla.org/en-US/docs/Glossary/CORS",[74],[963],{"type":28,"value":964},"CORS",{"type":28,"value":966}," request that checks to see if the CORS protocol is understood and a server is aware using specific methods and headers.)",{"type":22,"tag":31,"props":968,"children":969},{},[970,972,978],{"type":28,"value":971},"You can cache for a certain amount of time so that preflight wont be sent for every request you make. Open the ",{"type":22,"tag":111,"props":973,"children":975},{"className":974},[],[976],{"type":28,"value":977},"cors.php",{"type":28,"value":979}," file in your laravel application and update the 'max_age' configuration. Now whenever you make a request a preflight will be sent once only for every api route.",{"type":22,"tag":31,"props":981,"children":982},{},[983,985,992,994,1005],{"type":28,"value":984},"The preflight response can be optionally cached for the requests created in the same ",{"type":22,"tag":70,"props":986,"children":989},{"href":987,"rel":988},"https://developer.mozilla.org/en-US/docs/Glossary/URL",[74],[990],{"type":28,"value":991},"URL",{"type":28,"value":993}," using ",{"type":22,"tag":70,"props":995,"children":998},{"href":996,"rel":997},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Max-Age",[74],[999],{"type":22,"tag":111,"props":1000,"children":1002},{"className":1001},[],[1003],{"type":28,"value":1004},"Access-Control-Max-Age",{"type":28,"value":1006}," header like in the above example. To cache preflight responses, the browser uses a specific cache that is separate from the general HTTP cache that the browser manages. Preflight responses are never cached in the browser's general HTTP cache.",{"type":22,"tag":1008,"props":1009,"children":1010},"style",{},[1011],{"type":28,"value":1012},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":5,"searchDepth":205,"depth":205,"links":1014},[],"markdown","content:02-laravel-session.md","content","02-laravel-session.md","02-laravel-session","md",1734225313568]